/*
 * EEPROM.asm
 *
 *  Created: 25/09/15 17:42:54
 *   Author: Dorin
 */ 

; Write
WAIT:
SBIC EECR, 1
RJMP WAIT

LDI R16, 0
LDI R17, 0x5F
OUT EEARH, R16
OUT EEARL, R17

LDI R16, 'A'
OUT EEDR, R16

SBI EECR, 2
SBI EECR, 1

; Read
WAIT2:
SBIC EECR, 1
RJMP WAIT2

LDI R16, 0
LDI R17, 0x5F
OUT EEARH, R16
OUT EEARL, R17

SBI EECR, 3

IN R16, EEDR
OUT DDRA, R16

HERE: JMP HERE