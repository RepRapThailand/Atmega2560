.INCLUDE "M2560DEF.INC"

LDI R16, 0xFF
OUT DDRB, R16
OUT PORTB, R16

LDI R21, 0

BEGIN:
RCALL DELAY
RCALL DELAY
RCALL DELAY
COM R16
OUT PORTB, R16
INC R21
RJMP BEGIN

DELAY:
//Set init val of counter
OUT TCNT0, R21

//Set mode
LDI R20, 0b00000101
OUT TCCR0B, R20

//Monitor overflow falg
AGAIN:
IN R20, TIFR0
SBRS R20, TOV0
RJMP AGAIN

//Stop timer
LDI R20, 0
OUT TCCR0B, R20
LDI R20, (1<<TOV0)
OUT TIFR0, R20
RET