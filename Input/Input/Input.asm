/*
 * Input.asm
 *
 *  Created: 10-09-2015 08:31:09
 *   Author: Dorin
 */ 

LDI R19, 0 ; Counter
LDI R20, 0 ; Flag 0 - increment / 1 - don't

BACK:
IN R18, PORTA0
CPI R18, 0b11111110
BREQ TRY
LDI R20, 0
CALL DELAY
JMP BACK

TRY:
CPI R20, 0
BREQ INCREMENT
JMP BACK

INCREMENT:
INC R19
OUT DDRB, R19
LDI R20, 1
JMP BACK

DELAY:
LDI R21, 1
LOOP3: LDI R22, 255
LOOP2: LDI R23, 255
LOOP1: DEC R23 
BRNE LOOP1
DEC R22
BRNE LOOP2
DEC R21 
BRNE LOOP3
RET